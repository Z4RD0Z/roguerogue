function gameLoadStagesGenerator(game,C) {
    /*
        0:BLACK
        1:WHITE
        2:YELLOW
        3:GREEN
        4:BLUE
        5:RED,
        6:BROWN
        7:GRAY
    */
    C.STAGEPALETTES=[
        //Bl Ye Bl Gy Br

        [
            [0,1,2,6,7],
            [0,1,3,6,7],
            [0,1,4,6,7],
            [0,1,5,6,7]
        ],[
            [0,4,1,3,7],
            [0,4,1,5,7],
            [0,4,1,6,7],

            [0,2,1,3,7],
            [0,2,1,4,7],
            [0,2,1,5,7],
            [0,2,1,6,7],

            [0,6,1,3,7],
            [0,6,2,3,7],

            [0,1,7,2,6],
            [0,1,7,3,6],
            [0,1,7,4,6],
            [0,1,7,5,6],

            [0,2,7,3,6],
            [0,2,7,4,6],
            [0,2,7,5,6],

            [0,1,6,2,7],
            [0,1,6,3,7],
            [0,1,6,4,7],
            [0,1,6,5,7],

        ],[
            [0,5,1,7,6],
            [0,5,2,7,6],

            [0,4,1,7,6],
            [0,4,2,7,6],
            [0,4,3,7,6],

            [0,3,1,7,6],
            [0,3,2,7,6],

            [0,2,1,7,6],
            [0,2,3,7,6],
            [0,2,4,7,6],
            [0,2,5,7,6],

            [0,1,2,7,6],
            [0,1,3,7,6],
            [0,1,4,7,6],
            [0,1,5,7,6]  
        ],[
            [7,5,1,0,6],
            [7,5,2,0,6],
            [7,5,3,0,6],
            [7,5,4,0,6],
    
            [7,4,1,0,6],
            [7,4,2,0,6],
            [7,4,5,0,6],
    
            [7,3,1,0,6],
            [7,3,2,0,6],
            [7,3,5,0,6],
    
            [7,2,1,0,6],
            [7,2,3,0,6],
            [7,2,4,0,6],
            [7,2,5,0,6],
    
            [7,1,2,0,6],
            [7,1,3,0,6],
            [7,1,4,0,6],
            [7,1,5,0,6],
        ]
    ];

    C.STAGEPATTERNSETS=[
        [ 0 ],
        [ 0, 1 ],
        [ 0, 1 ],
        [ 0, 1, 2 ],
        [    1, 2 ],
        [    1, 2 ],
        [       2, 3 ],
        [    1, 2, 3 ],
        [    1, 2, 3 ],
        [       2, 3 ],
    ];

    C.STAGEPATTERNS = [
        [
            [
                "              ",
                "              ",
                "              ",
                "   #          ",
                "   ###########",
                "              ",
                "              ",
                "              ",
                "     #        ",
                "     #########",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "              ",
                "              ",
                "###   ########",
                "              ",
                "              ",
                "              ",
                "              ",
                "###   ########",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "              ",
                "   #       #  ",
                "   #########  ",
                "              ",
                "              ",
                "              ",
                "     #     #  ",
                "     #######  ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "              ",
                "########  ####",
                "              ",
                "              ",
                "              ",
                "##  ##########",
                "              ",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "              ",
                "   ##  ##  ## ",
                "              ",
                "              ",
                "              ",
                "     ##  ##   ",
                "              ",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "              ",
                "   ###  ###   ",
                "              ",
                "              ",
                "              ",
                "     ###  ### ",
                "              ",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "              ",
                "   ###########",
                "              ",
                "              ",
                "              ",
                "       #######",
                "              ",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "     #        ",
                "   ####### ###",
                "              ",
                "              ",
                "              ",
                "       ### ###",
                "         #    ",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "              ",
                "   #####  ####",
                "              ",
                "              ",
                "              ",
                "      ####  ##",
                "              ",
                "              ",
                "              ",
                "              ",
            ],[
                "      #       ",
                "      #       ",
                "      #       ",
                "      #  ##   ",
                "      #       ",
                "      #       ",
                "      #       ",
                "      #  ##   ",
                "      #       ",
                "      #       ",
                "              ",
                "              ",
            ],
            // Extra
            [
                "              ",
                "              ",
                "              ",
                "              ",
                "              ",
                "              ",
                "              ",
                "              ",
                "              ",
                "##   #########",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "##   #########",
                "              ",
                "              ",
                "              ",
                "              ",
                "##   #########",
                "              ",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "              ",
                "              ",
                "           ###",
                "              ",
                "              ",
                "              ",
                "              ",
                "        ##### ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "     #########",
                "              ",
                "              ",
                "              ",
                "              ",
                "  #######  ###",
                "              ",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "              ",
                "    #         ",
                "    # ########",
                "              ",
                "              ",
                "              ",
                "    #         ",
                "    # ########",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "              ",
                "              ",
                "    ##########",
                "              ",
                "              ",
                "              ",
                "              ",
                "############  ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "              ",
                "              ",
                "############  ",
                "              ",
                "              ",
                "              ",
                "              ",
                "##########    ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "    ##########",
                "              ",
                "              ",
                "              ",
                "              ",
                "  ########### ",
                "              ",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "############  ",
                "              ",
                "              ",
                "              ",
                "              ",
                " ###########  ",
                "              ",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "              ",
                "              ",
                "######        ",
                "              ",
                "              ",
                "              ",
                "              ",
                "########      ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "##########    ",
                "              ",
                "              ",
                "              ",
                "              ",
                "  ##########  ",
                "              ",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "              ",
                "  #           ",
                "  #           ",
                "  #           ",
                "  ##          ",
                "   ###########",
                "              ",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "              ",
                "              ",
                "  ########### ",
                "              ",
                "              ",
                "              ",
                "#######  #####",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "    ####    ##",
                "              ",
                "              ",
                "              ",
                "              ",
                "####    ####  ",
                "              ",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "              ",
                "              ",
                "######     ###",
                "              ",
                "              ",
                "              ",
                "              ",
                "####     #####",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "  ############",
                "              ",
                "              ",
                "############  ",
                "              ",
                "              ",
                "############  ",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "##     #######",
                "              ",
                "              ",
                "              ",
                "              ",
                "#    #########",
                "              ",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "              ",
                "              ",
                "     #####    ",
                "              ",
                "              ",
                "              ",
                "              ",
                "    #######   ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "   #########  ",
                "              ",
                "              ",
                "              ",
                "              ",
                "  ########### ",
                "              ",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "              ",
                "              ",
                "          ### ",
                "              ",
                "              ",
                "       ####   ",
                "              ",
                "              ",
                "   ###   #####",
                "              ",
            ],[
                "              ",
                "       ####   ",
                "              ",
                "              ",
                "          ### ",
                "              ",
                "              ",
                "    #####     ",
                "              ",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "   ##   ##   #",
                "              ",
                "              ",
                "              ",
                "   ##   ##   #",
                "              ",
                "              ",
                "              ",
                "   ##         ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "              ",
                "              ",
                "#  ##  ##  ## ",
                "              ",
                "              ",
                "              ",
                "              ",
                "##  ##  ##  ##",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                " ##  ##  ##  #",
                "              ",
                "              ",
                "              ",
                "              ",
                "  ##  ##  ##  ",
                "              ",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "#  ####  #### ",
                "              ",
                "              ",
                "              ",
                "       #     #",
                "       #     #",
                "              ",
                "######  ##### ",
                "              ",
                "              ",
                "              ",
            ]
        ],[
            [
                "              ",
                "              ",
                "  ############",
                "              ",
                "              ",
                "############  ",
                "              ",
                "              ",
                "  ############",
                "              ",
                "              ",
                "############  ",
            ],[
                "              ",
                "              ",
                "  ############",
                "              ",
                "              ",
                "############  ",
                "              ",
                "              ",
                "  ############",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "              ",
                "              ",
                "   #####   ###",
                "   #          ",
                "   #          ",
                "   #          ",
                "   #          ",
                "   ###        ",
                "   #          ",
                "   #          ",
            ],[
                "              ",
                "              ",
                "              ",
                "              ",
                "   #  #  #  # ",
                "   #  #  #  # ",
                "   #  #  #  # ",
                "   #  #  #  # ",
                "   #  #  #  # ",
                "   #  #  #  # ",
                "   #  #  #  # ",
                "   #  #  #  # ",
            ],[
                "              ",
                "              ",
                "              ",
                "##  ####  ### ",
                "    #         ",
                "    #         ",
                "    #         ",
                "##  #     ## #",
                "    #         ",
                "    #         ",
                "    #         ",
                "##  #     ####",
            ],[
                "              ",
                "              ",
                "              ",
                "       ###### ",
                "          #   ",
                "          #   ",
                "       ####   ",
                "              ",
                "              ",
                "       ####   ",
                "       #      ",
                "       #      ",
            ],[
                "              ",
                "              ",
                "              ",
                "              ",
                "   #######  ##",
                "         #    ",
                "         #    ",
                "         #    ",
                "         #    ",
                "   #######  ##",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "              ",
                "              ",
                "   ##### #    ",
                "         #    ",
                "         #    ",
                "         # ###",
                "         #    ",
                "   ##### #    ",
                "              ",
                "              ",
            ],[
                "        #     ",
                "        #     ",
                "        #     ",
                "        #     ",
                "   ######   ##",
                "   #          ",
                "   #          ",
                "   #          ",
                "   #          ",
                "   #####    ##",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "              ",
                "#######     ##",
                "   #          ",
                "   #          ",
                "   #          ",
                "   #          ",
                "#######     ##",
                "              ",
                "              ",
                "              ",
            ],
            // Extra
            [
                "              ",
                "              ",
                "              ",
                "              ",
                "   ########   ",
                "   #          ",
                "   #          ",
                "   #          ",
                "   #          ",
                "   #########  ",
                "   #          ",
                "   #          ",
            ],[
                "   #          ",
                "   #          ",
                "   ########## ",
                "              ",
                "              ",
                "              ",
                "              ",
                "#####  ###    ",
                "              ",
                "              ",
                "              ",
                "              ",
            ],[
                "      #       ",
                "      ###     ",
                "              ",
                "              ",
                "              ",
                "   #########  ",
                "   #      ##  ",
                "   #      ##  ",
                "   #      ##  ",
                "   ####   ##  ",
                "          ##  ",
                "          ##  ",
            ],[
                "          ##  ",
                "          ##  ",
                "   ####       ",
                "   #          ",
                "   #          ",
                "   #          ",
                "   #          ",
                "   #######   #",
                "              ",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "   #          ",
                "   #          ",
                "   #          ",
                "   #          ",
                "   #  ##      ",
                "   #          ",
                "   #          ",
                "   #          ",
                "   #          ",
                "   #  ##      ",
            ],[
                "   #          ",
                "   #          ",
                "              ",
                "              ",
                "      ########",
                "              ",
                "              ",
                "              ",
                "####  ##  ####",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "              ",
                "              ",
                "   ####      #",
                "              ",
                "              ",
                "              ",
                "  ####      ##",
                "              ",
                "              ",
                "              ",
            ],[
                "   ####    ###",
                "              ",
                "              ",
                "              ",
                "    ####  ### ",
                "              ",
                "              ",
                "              ",
                "      ######  ",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "        #     ",
                "              ",
                "   #          ",
                "   #          ",
                "   ##### #####",
                "              ",
                "              ",
                "              ",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "              ",
                " #############",
                "              ",
                "########## ###",
                "              ",
                " #############",
                "              ",
                "############# ",
                "      #     # ",
                "      #       ",
            ],[
                "              ",
                "              ",
                "              ",
                "############# ",
                "              ",
                "### ##########",
                "              ",
                "########## ###",
                "              ",
                " #############",
                " #     #      ",
                "       #      ",
            ],[
                "              ",
                "              ",
                "              ",
                "              ",
                "              ",
                "              ",
                "####  ####   #",
                "              ",
                "              ",
                "##########    ",
                "      #       ",
                "              ",
            ],[
                "              ",
                "              ",
                "####       ###",
                "              ",
                "              ",
                "###        ###",
                "              ",
                "              ",
                "##          ##",
                "              ",
                "              ",
                "##          ##",
            ],[
                "              ",
                "              ",
                "              ",
                "  #    #   #  ",
                "  #    #   #  ",
                "  #    #   #  ",
                "  #    #   #  ",
                "  #    #   #  ",
                "  ######   ###",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "      #    #  ",
                "      #    #  ",
                "      #    #  ",
                "      #    #  ",
                "      #    #  ",
                "      ######  ",
                "              ",
                "              ",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "              ",
                "              ",
                "#             ",
                "              ",
                "    ######### ",
                "   ##         ",
                "   #          ",
                "#  #          ",
                "   #          ",
                "   #          ",
            ],[
                "              ",
                "              ",
                "      #      #",
                "              ",
                "  ##      ##  ",
                "              ",
                "              ",
                "       #      ",
                "              ",
                "  ##      ##  ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "             #",
                "             #",
                "              ",
                "              ",
                "####         #",
                "   #         #",
                "   #          ",
                "####          ",
                "   #          ",
                "   #          ",
            ],[
                "  ########### ",
                "              ",
                "              ",
                "              ",
                "#######  #####",
                "              ",
                "              ",
                "              ",
                "############# ",
                "      #       ",
                "      #       ",
                "      #       ",
            ],[
                "              ",
                "              ",
                "              ",
                "              ",
                "              ",
                "              ",
                "              ",
                "              ",
                "              ",
                "#  ##  ##  ## ",
                "#  ##  ##  ## ",
                "              ",
            ],[
                "              ",
                "     ####  ###",
                "     #        ",
                "#    #        ",
                "     #        ",
                "              ",
                "              ",
                "              ",
                "###  #   #####",
                "     #        ",
                "     #        ",
                "     #        ",
            ],[
                "              ",
                "              ",
                "              ",
                "              ",
                "              ",
                "##  ##########",
                "         ##   ",
                "         ##   ",
                "              ",
                "              ",
                "  ############",
                "    ##       #",
            ],[
                "    ##       #",
                "              ",
                "              ",
                "###########  #",
                "             #",
                "              ",
                "              ",
                "              ",
                "  ############",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "              ",
                "              ",
                "##    ########",
                "      #    #  ",
                "      #    #  ",
                "      #    #  ",
                "##  ##########",
                "              ",
                "              ",
                "              ",
            ],[
                "##  ##  ##   #",
                "              ",
                "              ",
                "              ",
                "####  #####  #",
                "   #          ",
                "              ",
                "              ",
                "####  ####### ",
                "   #          ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "              ",
                "#  ##  ##  ## ",
                "              ",
                " ##  ##  ##  #",
                "              ",
                "#  ##  ##  ## ",
                "              ",
                " ##  ##  ##  #",
                "              ",
                "#  ##  ##  ## ",
            ],[
                "  #     ##    ",
                "  #     ##    ",
                "  #     ##    ",
                "  #           ",
                "  #           ",
                "  ############",
                "              ",
                "              ",
                "              ",
                "              ",
                "              ",
                "              ",
            ],[
                "    #  #      ",
                "    #  #      ",
                "    #  #      ",
                "    #  #      ",
                "    #  #      ",
                "#####  #######",
                "           ###",
                "           ###",
                "           ###",
                "           ###",
                "           ###",
                "           ###",
            ],[
                "              ",
                "              ",
                "              ",
                "              ",
                "              ",
                "              ",
                "              ",
                "              ",
                "  ############",
                "  ############",
                "  #           ",
                "              ",
            ],[
                "              ",
                "  ##          ",
                "  ############",
                "  ############",
                "  ############",
                "  ############",
                "  ############",
                "    ##########",
                "              ",
                "##            ",
                "              ",
                "              ",
            ],[
                "     #####    ",
                "      ###     ",
                "       #      ",
                "              ",
                "  #######     ",
                "        #     ",
                "        #     ",
                "        #     ",
                "        #     ",
                "        #     ",
                "        #     ",
                "              ",
            ],[
                "              ",
                " ##  ##  ##  #",
                "              ",
                "#  ##  ##  ## ",
                "              ",
                " ##  ##  ##  #",
                "              ",
                "#  ##  ##  ## ",
                "              ",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "       #####  ",
                "              ",
                "############  ",
                "              ",
                "              ",
                "              ",
                "              ",
                "              ",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "              ",
                "              ",
                "              ",
                "  #           ",
                "  ############",
                "              ",
                "              ",
                "              ",
                "    ##        ",
                "              ",
            ],[
                "              ",
                "              ",
                "              ",
                "              ",
                "              ",
                "              ",
                "              ",
                "              ",
                "              ",
                "  #           ",
                "  ############",
                "              ",
            ]
        ],[
            [
                "              ",
                "              ",
                "              ",
                "              ",
                "      ### ####",
                "     ##       ",
                "    ##        ",
                "   ##         ",
                "   #     #    ",
                "   #     #####",
                "   #          ",
                "   #          ",
            ],[
                "              ",
                "              ",
                "      ##      ",
                "  ##  ##  ##  ",
                "      ##      ",
                "              ",
                "              ",
                "          ##  ",
                "      ##  ##  ",
                "          ##  ",
                "              ",
                "              ",
            ],[
                "        ##    ",
                "        ##    ",
                "        ##    ",
                "        ##    ",
                "        ##    ",
                "       ##     ",
                "      ##      ",
                "     ##       ",
                "    ##        ",
                "    ##        ",
                "    ##        ",
                "    ##        ",
            ],[
                "              ",
                "              ",
                "              ",
                "              ",
                "   #####   ###",
                "   #       #  ",
                "   #       #  ",
                "   #       #  ",
                "   #### ####  ",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "              ",
                "         #    ",
                "    ######  ##",
                "   #        # ",
                "   #          ",
                "   #          ",
                "    ######  ##",
                "         #  # ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "   ######### #",
                "   #          ",
                "   ###     ###",
                "   #          ",
                "   #          ",
                "   ###     ###",
                "   #          ",
                "   ### #######",
                "              ",
                "              ",
            ],
            // Extra
            [
                "              ",
                "              ",
                "              ",
                "##            ",
                "              ",
                " ###          ",
                "   #          ",
                "## ###        ",
                "   ###        ",
                "   #####      ",
                "       #      ",
                "###### ###    ",
            ],[
                "       ###    ",
                "       #####  ",
                "         ###  ",
                "######## ###  ",
                "         ###  ",
                "         ###  ",
                "           #  ",
                "####  #### #  ",
                "      #       ",
                "      #       ",
                "      #       ",
                "              ",
            ],[
                "              ",
                "              ",
                "              ",
                "              ",
                "   #####   ###",
                "              ",
                "              ",
                "              ",
                "              ",
                "             #",
                "             #",
                "           ###",
            ],[
                "              ",
                "              ",
                "   #          ",
                "        ###   ",
                "       ## ##  ",
                "       # # #  ",
                "       ## ##  ",
                "   #    ###   ",
                "   #          ",
                "   #          ",
                "   #         #",
                "   #         #",
            ],[
                "   #          ",
                "   #          ",
                "   #  ##      ",
                "   # # ##     ",
                "   # ####     ",
                "   #  ####    ",
                "# ##   ###    ",
                "        ###   ",
                "         ##   ",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "   ###        ",
                "  ## ###      ",
                " ##    ##     ",
                " #      #     ",
                "        ##    ",
                "         #    ",
                "         #    ",
                "        ##    ",
                "        #     ",
                "       ##     ",
            ],[
                "      #       ",
                "      ##      ",
                "       ##     ",
                "        ##    ",
                "         ##   ",
                "          ##  ",
                "           ## ",
                "            ##",
                "             #",
                "              ",
                "              ",
                "              ",
            ],[
                "           #  ",
                "           #  ",
                "           #  ",
                "           #  ",
                "########## #  ",
                "              ",
                "              ",
                "              ",
                "############  ",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "###           ",
                "####          ",
                "###           ",
                "##         ## ",
                "#          ## ",
                "           ## ",
                "           ## ",
                "           ## ",
                "           ## ",
                "           ## ",
                "          ##  ",
            ],[
                "         ##   ",
                "        ##    ",
                "       ##     ",
                "       ##     ",
                "       ##     ",
                "       ##     ",
                "       ##     ",
                "       ##     ",
                "       ###### ",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "              ",
                "  #  #  #  ## ",
                "  #  #  #  ## ",
                "              ",
                "              ",
                "              ",
                "  #  #  #  ## ",
                "  #  #  #  ## ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "######  ######",
                "    #     ##  ",
                "          ##  ",
                "        ##### ",
                "#   #         ",
                "#  ##         ",
                "######        ",
                "              ",
                "           ## ",
                "         #####",
            ],[
                "              ",
                "         #    ",
                "##########    ",
                "              ",
                "             #",
                "            ##",
                "           ###",
                "   ##         ",
                "  ######      ",
                "    ######    ",
                "              ",
                "             #",
            ],[
                "       ###   #",
                "#            #",
                "##            ",
                "###           ",
                "#             ",
                "         ###  ",
                "       #######",
                "       #      ",
                "              ",
                "              ",
                "              ",
                "      ########",
            ],[
                "#         ####",
                "##  #         ",
                " #  ##        ",
                "    ######    ",
                "              ",
                "             #",
                "##          ##",
                "       #  ### ",
                "      ##  #   ",
                "              ",
                "              ",
                "########      ",
            ],[
                "  ############",
                "          ####",
                "          #   ",
                "          #   ",
                "  ############",
                "              ",
                "              ",
                "              ",
                "         #### ",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "  #########   ",
                "             #",
                "  ######### ##",
                "            ##",
                "  ######### ##",
                "            ##",
                "  ######### ##",
                "            ##",
                "  ######### ##",
                "            ##",
                "            ##",
            ],[
                "           ###",
                "           ###",
                "             #",
                "        ###  #",
                "              ",
                "              ",
                "       ###  ##",
                "              ",
                "              ",
                "      ###  ## ",
                "              ",
                "              ",
            ],[
                "     ###  ##  ",
                "              ",
                "              ",
                "    ###  ##  #",
                "              ",
                "              ",
                "   ###  ##  # ",
                "              ",
                "              ",
                "  ###  ##  #  ",
                "              ",
                "              ",
            ],[
                "              ",
                "    ##        ",
                "              ",
                "##            ",
                "   ##   #  ###",
                "   #   ##     ",
                "   #  ###  ###",
                "      # #     ",
                "###   # #    #",
                "  ##  # #  ###",
                "  #     #  #  ",
                "  #     #  ###",
            ],[
                "              ",
                "####  ###  ###",
                "              ",
                "              ",
                "      #       ",
                "####  #   ## #",
                "      #       ",
                "              ",
                "     ###      ",
                "##         ###",
                "   #   #######",
                "              ",
            ],[
                "              ",
                "              ",
                "  #  #        ",
                "  #  #########",
                "  #        #  ",
                "  #        ###",
                "  #        #  ",
                "  #        ###",
                "  #        #  ",
                "  #  ####  ###",
                "  #  #  #  #  ",
                "  #  #  #  ###",
            ],[
                "  #  ####  #  ",
                "  #  #  #  ###",
                "  #  #  #  #  ",
                "  #  ####  ###",
                "  #  #  #  #  ",
                "  #  #  #  ###",
                "  #  ####  #  ",
                "  #        #  ",
                "  #        #  ",
                "  #        #  ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "   ####       ",
                "   #      ####",
                "  ##    ###   ",
                "          #   ",
                "  ## ## ###   ",
                "          #   ",
                "####    ###   ",
                "          # ##",
                "  ## ## ### # ",
                "          # # ",
            ],[
                "####    ### # ",
                "          # ##",
                "  ## ## ###   ",
                "          #   ",
                "####    ###   ",
                "          #   ",
                "  ## ## ###   ",
                "          ####",
                "              ",
                "##  ######    ",
                "      #       ",
                "      #       ",
            ],[
                "#######    ###",
                "#######    #  ",
                "#######       ",
                "#######   ##  ",
                "           #  ",
                "              ",
                "###  ####     ",
                "              ",
                "              ",
                "              ",
                "  #     #    #",
                "  #     #    #",
            ],[
                "   #          ",
                "   #          ",
                "   #          ",
                "   #          ",
                "   #    ######",
                "   #          ",
                "   #          ",
                "   #########  ",
                "   #          ",
                "   #          ",
                "   ###########",
                "   ###########",
            ],[
                "              ",
                "              ",
                "              ",
                "    #   ######",
                "    #   #     ",
                "    #   #     ",
                "    #   #   ##",
                "    #   #   ##",
                "    #   #   ##",
                "    #   ######",
                "    #   ######",
                "    #   #     ",
            ],[
                "              ",
                "              ",
                "              ",
                "###### ##### #",
                "       #      ",
                "       #  ####",
                "###    #  #   ",
                "###    #  #   ",
                "###    #  #   ",
                "###    #  #   ",
                "###    #  #   ",
                "       #  #   ",
            ],[
                "    #   #     ",
                "    #   #   ##",
                "    #   #   ##",
                "    #   #   ##",
                "    #   ######",
                "    #      ###",
                "    #####  ###",
                "    #####  ###",
                "    #####  ###",
                "    #####  ###",
                "    #####  ###",
                "              ",
            ],[
                "       #  #   ",
                "###    #  #   ",
                "###    #  #   ",
                "###    #  #   ",
                "###    #  #   ",
                "###    #  #   ",
                "###    #  #   ",
                "###    #  #   ",
                "###    #  #   ",
                "###    #  #   ",
                "###    ## #   ",
                "              ",
            ],[
                "              ",
                "              ",
                "  ########### ",
                "         #    ",
                "         #    ",
                "         #    ",
                "  ##  #  #  # ",
                "  ##  #  #  # ",
                "  ##  #  #  # ",
                "  ##  #  #  # ",
                "  ##  #  #    ",
                "      #       ",
            ],[
                "      #       ",
                "##  ###  #    ",
                "    ###  #  # ",
                "    ###  #  # ",
                "    ###  #  # ",
                "    ###     # ",
                "    ###     # ",
                "    ###     # ",
                "    ######### ",
                "           #  ",
                "           #  ",
                "    ########  ",
            ],[
                "#  #####      ",
                "#             ",
                "#   ###       ",
                "#   ##        ",
                "#   ##        ",
                "#             ",
                "#  #####   ###",
                "  ##   ##     ",
                "  #     #     ",
                "  #     #   ##",
                "   #   ##     ",
                "#  #####      ",
            ],[
                "       #      ",
                "    #       # ",
                "    ##   #    ",
                "     ##      #",
                "###   ##   #  ",
                "  ##   ##     ",
                "  ###   ##   #",
                "  # ##   ##   ",
                "  #  ##   ### ",
                "###   #     # ",
                "      #       ",
                "      #       ",
            ],[
                " ############ ",
                "  ########### ",
                "   ##         ",
                "  #########   ",
                "              ",
                "    ######### ",
                "  #           ",
                "  ############",
                "  #           ",
                "  ############",
                "              ",
                "              ",
            ]
        ],[
            [
                "              ",
                "              ",
                "           #  ",
                "#######    # #",
                "###   #       ",
                "###   #       ",
                "      ###  ###",
                "      ###  ###",
                "      ###  ###",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "            ##",
                "          ### ",
                "       ####   ",
                "       #      ",
                "      ##      ",
                "     ##       ",
                "    ##        ",
                "    #         ",
                "    #    ##   ",
                "    #         ",
            ],[
                "              ",
                "              ",
                "              ",
                "## #      ####",
                "   #      #   ",
                "   #          ",
                "   #       #  ",
                "   #      ##  ",
                "   #     ###  ",
                "   #    ####  ",
                "   #     ##   ",
                "   #          ",
            ],[
                "              ",
                "              ",
                "              ",
                "##  # ### ## #",
                "    #  #  #  #",
                "    #  #  #  #",
                "    #  #  #  #",
                "##  ## # ## ##",
                "    #  #  #  #",
                "    #  #  #  #",
                "    #  #  #  #",
                "##  #  #  #  #",
            ],[
                "              ",
                "              ",
                "              ",
                "##       #    ",
                "         #    ",
                "       #####  ",
                "         #    ",
                "##       #    ",
                "         #    ",
                "       #####  ",
                "         #    ",
                "##       #    ",
            ],[
                "              ",
                "              ",
                "              ",
                "  ##          ",
                "              ",
                "       ##  ## ",
                "              ",
                "  ##     ##   ",
                "              ",
                "       ##  ## ",
                "              ",
                "  ##          ",
            ],[
                "              ",
                "              ",
                "       ##     ",
                "   ##      ## ",
                "       ##     ",
                "   ##      ## ",
                "       ##     ",
                "   ##      ## ",
                "       ##     ",
                "   ##      ## ",
                "       ##     ",
                "              ",
            ],[
                "              ",
                "              ",
                "##   ###  ### ",
                "     #      # ",
                "     #      # ",
                "##   ###  ### ",
                "     #      # ",
                "     #      # ",
                "##   ###  ### ",
                "     #      # ",
                "     #      # ",
                "##   ###  ### ",
            ],[
                "#            #",
                "#            #",
                "#            #",
                "#            #",
                "##          ##",
                "              ",
                "              ",
                "##          ##",
                "#            #",
                "#            #",
                "#            #",
                "#            #",
            ],[
                "              ",
                "              ",
                "      #       ",
                "     #  #     ",
                "    #    #    ",
                "   #      #   ",
                "  #        #  ",
                "  #        #  ",
                "  #        ###",
                "              ",
                "              ",
                "              ",
            ],[
                "           # #",
                "          #   ",
                "         #    ",
                "        #     ",
                "##     #      ",
                "      #       ",
                "     #        ",
                "     #        ",
                "     #        ",
                "##   #        ",
                "     #        ",
                "     #        ",
            ],[
                "              ",
                "              ",
                "              ",
                "##   ###### ##",
                "##   ###### ##",
                "              ",
                "              ",
                "              ",
                "##   ## ######",
                "##   ## ######",
                "              ",
                "              ",
            ],
            // Extra
            [
                "              ",
                "      #       ",
                "      #       ",
                "      #       ",
                "      #       ",
                "      ###### #",
                "      ###### #",
                "      ###### #",
                "      ###### #",
                "             #",
                " #############",
                "  ############",
            ],[
                "              ",
                "              ",
                "              ",
                "              ",
                "              ",
                "########  ####",
                "########      ",
                "########      ",
                "########      ",
                "########      ",
                "########      ",
                "############  ",
            ],[
                "# #           ",
                "  #           ",
                " ##           ",
                "  #           ",
                "# # ##########",
                "              ",
                "              ",
                "              ",
                "  ############",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "         #    ",
                "  ########    ",
                "  ########    ",
                "  ##     #    ",
                "  ##     ###  ",
                "           #  ",
                "           ###",
                "             #",
                "         #   #",
                "#####        #",
                "#####        #",
            ],[
                "#####         ",
                "#####         ",
                "#####  ###### ",
                "#####  ###### ",
                "#####  ##     ",
                "#####  ##     ",
                "#####  ##  ###",
                "#####      ###",
                "#####        #",
                "#            #",
                "#      #######",
                "#      #######",
            ],[
                "###           ",
                "###           ",
                "###           ",
                "###           ",
                "###  #########",
                "##   #  #  #  ",
                "#    #  #  # #",
                "     #  #  # #",
                "     #  #  #  ",
                "     ######## ",
                "     #  #  ## ",
                "     #  #  ## ",
            ],[
                "           ###",
                "           ###",
                "           ###",
                "           ###",
                "#########  ###",
                "  #  #  #   ##",
                "# #  #  #    #",
                "# #  #  #     ",
                "  #  #  #     ",
                " ########     ",
                "  #  #  #     ",
                " ##  #  #     ",
            ],[
                "  #     #     ",
                "###     #     ",
                "#########     ",
                "              ",
                "              ",
                "##########    ",
                "###           ",
                "  #           ",
                "###           ",
                "  #           ",
                "###           ",
                "  #           ",
            ],[
                "              ",
                "              ",
                "#      ##     ",
                "#  ##  ##  ###",
                "#             ",
                "              ",
                " ######  ###  ",
                "              ",
                "#      ##     ",
                "#  ##  ##  ###",
                "#      ##     ",
                "              ",
            ],[
                "  #  #  #  #  ",
                "  #  #  #  #  ",
                "  #  #  #  #  ",
                "  #  #  #  #  ",
                "  ############",
                "   ###########",
                "#        #####",
                "#         ## #",
                "#####      # #",
                "    #      # #",
                "    #      # #",
                "           # #",
            ],[
                "              ",
                "              ",
                "            ##",
                "           ## ",
                "          ##  ",
                "       ####   ",
                "      ##  #   ",
                "    ###   ####",
                "   ## #   #   ",
                "  ##  #   #   ",
                "  #   #####   ",
                "  #   #   #   ",
            ],[
                "  #####   ####",
                "  #   #   #   ",
                "  #   #####   ",
                "  #   #   #   ",
                "  #####   ####",
                "  #   #   #   ",
                "  #   #####   ",
                "  #   #   #   ",
                "  #   #   #   ",
                "  #####   ### ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "              ",
                "     #########",
                "    ##########",
                "   ##  ###  ##",
                "   #    ##  ##",
                "   #    ##  ##",
                "   #    ##  ##",
                "   #    ##  ##",
                "   #    ##  ##",
                "   #    ##  ##",
            ],[
                "   #    ##  ##",
                "   #    ##  ##",
                "   #    ##  ##",
                "   #    ##  ##",
                "   ##  ###  ##",
                "    ##########",
                "     #########",
                "              ",
                "              ",
                "              ",
                "       ####   ",
                "              ",
            ],[
                "           #  ",
                "#####      #  ",
                "#####         ",
                "#####         ",
                "#######       ",
                "#####    ###  ",
                "#####      #  ",
                "#######    #  ",
                "#####      #  ",
                "#####    ###  ",
                "#####      #  ",
                "#######    #  ",
            ],[
                "#####      #  ",
                "#####    ###  ",
                "#####      #  ",
                "#######    #  ",
                "#          #  ",
                "#        ###  ",
                "#          #  ",
                "#    ##    #  ",
                "#          #  ",
                "#        ###  ",
                "#             ",
                "#             ",
            ],[
                "  #      #####",
                "  ###    #####",
                "  #      #####",
                "  #    #######",
                "  #           ",
                "  ###         ",
                "  #           ",
                "  #    ##     ",
                "  #           ",
                "  ###         ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "  ############",
                "  #           ",
                "  #           ",
                "  #           ",
                "  ############",
                "  ############",
                "  ############",
                "  ############",
                "  #   ########",
                "  #   ########",
            ],[
                "              ",
                "              ",
                "########  ##  ",
                "           #  ",
                "           #  ",
                "           #  ",
                "#######    #  ",
                "#######    #  ",
                "#######    #  ",
                "#######    #  ",
                "#######    #  ",
                "#######    #  ",
            ],[
                "#######    #  ",
                "#####      #  ",
                "#####      #  ",
                "############  ",
                "############  ",
                "    ########  ",
                "    #   ####  ",
                "    #   ####  ",
                " ###########  ",
                "              ",
                "              ",
                "              ",
            ],[
                "              ",
                "              ",
                "              ",
                "    ##########",
                "    ##########",
                "    ##########",
                "    #####  ###",
                "    #####  ###",
                "    #####  #  ",
                "    #####  #  ",
                "    #      #  ",
                "    #         ",
            ],[
                "              ",
                "              ",
                "              ",
                "###### # # #  ",
                "##  ## # # #  ",
                "##  #         ",
                "##  #         ",
                "##  #         ",
                "              ",
                " #            ",
                " #            ",
                " ####         ",
            ],[
                "    #   #     ",
                "    #   ####  ",
                "    #   ######",
                "    #   ######",
                "    ##########",
                "              ",
                "              ",
                "  ############",
                "              ",
                "              ",
                "              ",
                "              ",
            ],[
                "     ##    ###",
                "     ##    # #",
                "     ##    ###",
                "     ##    ###",
                "     ##    ###",
                "     ##    ###",
                "     ##    ###",
                "     ##    ###",
                "     ##    #  ",
                "     ##       ",
                "     ##       ",
                "     ##    #  ",
            ],[
                "              ",
                "              ",
                "              ",
                "              ",
                "############  ",
                "##    #       ",
                "#######  #####",
                "##    #    #  ",
                "##            ",
                "############  ",
                "##    #    #  ",
                "##         #  ",
            ],[
                "              ",
                "              ",
                "              ",
                "   ######     ",
                "        #     ",
                "        #     ",
                "   #######    ",
                "        #     ",
                "        #     ",
                "   ######     ",
                "        #     ",
                "        #     ",
            ],[
                "   ######     ",
                "        #     ",
                "        #     ",
                "   ######     ",
                "        #     ",
                "        #     ",
                "  #######     ",
                "        #     ",
                "        ######",
                "  ############",
                "           ###",
                "           ###",
            ],[
                "#####       ##",
                "#####       ##",
                "########## ###",
                "######      ##",
                "######      ##",
                "######      ##",
                "######  #   ##",
                "     #  #   ##",
                "     #  #   ##",
                "     #  #   ##",
                "     #  #   ##",
                "  #  #  #   ##",
            ],[
                "  #  #  #   ##",
                "  #     #   ##",
                "  #     ######",
                "  #  #  ###  #",
                "  #  #  ###  #",
                "  #  #  ######",
                "  #  #  ######",
                "  #  #  ######",
                "  #  #  ######",
                "  ############",
                "      # ######",
                "   #    ######",
            ],[
                "##   #  #  #  ",
                "##   #     #  ",
                "######     #  ",
                "######  #  #  ",
                "######  #  #  ",
                "######  #  #  ",
                "######  #  #  ",
                "    ##  #  #  ",
                "    ##  #  #  ",
                "##  ########  ",
                "##            ",
                "########      ",
            ],[
                "              ",
                "              ",
                "              ",
                "    ##########",
                "    ######### ",
                "    ######### ",
                "    ######### ",
                "    ######### ",
                "    #       # ",
                "    #       # ",
                "    ######### ",
                "    ######### ",
            ],[
                "              ",
                "              ",
                "              ",
                " ######### ## ",
                " ######### ## ",
                " ######### ## ",
                " ######### ## ",
                " ######### ## ",
                " ######### ## ",
                "    ###### ## ",
                " #  ###### ## ",
                " ## ###### ## ",
            ],[
                "    ######### ",
                "    ######### ",
                "    ######### ",
                "    #       # ",
                "    #       # ",
                "    ######### ",
                "    ######### ",
                "    ######### ",
                "    ######### ",
                "    ######### ",
                "    ######### ",
                "              ",
            ],[
                " #  ###### ## ",
                " ## ###### ## ",
                " ## ###### ## ",
                " ## ###### ## ",
                "       ### ## ",
                " ##### ### ## ",
                " ##### ### ## ",
                " ##### ### ## ",
                " ##### ### ## ",
                "       ### ## ",
                "              ",
                "              ",
            ]
        ]
    ];
    
    C.DICTIONARIES={
        letters5:[
            "ABROAD",
            "ACCEPT",
            "ACCESS",
            "ACROSS",
            "ACTING",
            "ACTION",
            "ACTIVE",
            "ACTUAL",
            "ADVICE",
            "AFFECT",
            "AFFORD",
            "AGENCY",
            "AGENDA",
            "ALMOST",
            "ALWAYS",
            "AMOUNT",
            "ANIMAL",
            "ANNUAL",
            "ANSWER",
            "ANYONE",
            "ANYWAY",
            "APPEAL",
            "APPEAR",
            "AROUND",
            "ARRIVE",
            "ARTIST",
            "ASPECT",
            "ASSIST",
            "ASSUME",
            "ATTACK",
            "ATTEND",
            "AUGUST",
            "AUTHOR",
            "AVENUE",
            "BACKED",
            "BARELY",
            "BATTLE",
            "BEAUTY",
            "BEFORE",
            "BEHALF",
            "BEHIND",
            "BELIEF",
            "BELONG",
            "BETTER",
            "BEYOND",
            "BISHOP",
            "BORDER",
            "BOTTLE",
            "BOTTOM",
            "BRANCH",
            "BREATH",
            "BRIDGE",
            "BRIGHT",
            "BROKEN",
            "BUDGET",
            "BURDEN",
            "BUTTON",
            "CAMERA",
            "CARBON",
            "CAREER",
            "CASTLE",
            "CASUAL",
            "CAUGHT",
            "CENTER",
            "CENTRE",
            "CHANCE",
            "CHANGE",
            "CHARGE",
            "CHOICE",
            "CHOSEN",
            "CIRCLE",
            "CLIENT",
            "CLOSED",
            "CLOSER",
            "COFFEE",
            "COLUMN",
            "COMBAT",
            "COMING",
            "COMMON",
            "COMPLY",
            "COPPER",
            "CORNER",
            "COSTLY",
            "COUNTY",
            "COUPLE",
            "COURSE",
            "COVERS",
            "CREATE",
            "CREDIT",
            "CUSTOM",
            "DAMAGE",
            "DANGER",
            "DEBATE",
            "DECADE",
            "DECIDE",
            "DEFEAT",
            "DEFEND",
            "DEFINE",
            "DEGREE",
            "DEMAND",
            "DEPEND",
            "DESERT",
            "DESIGN",
            "DESIRE",
            "DETAIL",
            "DETECT",
            "DEVICE",
            "DIFFER",
            "DINNER",
            "DIRECT",
            "DOCTOR",
            "DOLLAR",
            "DOMAIN",
            "DOUBLE",
            "DRIVER",
            "DURING",
            "EASILY",
            "EATING",
            "EDITOR",
            "EFFECT",
            "EFFORT",
            "EITHER",
            "EMERGE",
            "EMPIRE",
            "EMPLOY",
            "ENABLE",
            "ENDING",
            "ENERGY",
            "ENGAGE",
            "ENGINE",
            "ENOUGH",
            "ENSURE",
            "ENTIRE",
            "ENTITY",
            "EQUITY",
            "ESCAPE",
            "ESTATE",
            "ETHNIC",
            "EXCEED",
            "EXCEPT",
            "EXCESS",
            "EXPAND",
            "EXPECT",
            "EXPERT",
            "EXPORT",
            "EXTEND",
            "EXTENT",
            "FABRIC",
            "FACING",
            "FACTOR",
            "FAIRLY",
            "FALLEN",
            "FAMILY",
            "FAMOUS",
            "FELLOW",
            "FIGURE",
            "FILING",
            "FINGER",
            "FINISH",
            "FLIGHT",
            "FLYING",
            "FOLLOW",
            "FORCED",
            "FOREST",
            "FORGET",
            "FORMAL",
            "FORMAT",
            "FOSTER",
            "FOUGHT",
            "FOURTH",
            "FRIEND",
            "FUTURE",
            "GARDEN",
            "GATHER",
            "GLOBAL",
            "GOLDEN",
            "GROUND",
            "GROWTH",
            "HANDED",
            "HANDLE",
            "HAPPEN",
            "HARDLY",
            "HEADED",
            "HEALTH",
            "HEIGHT",
            "HIDDEN",
            "HOLDER",
            "HONEST",
            "IMPACT",
            "IMPORT",
            "INSIDE",
            "INTEND",
            "INTENT",
            "INVEST",
            "ISLAND",
            "ITSELF",
            "JERSEY",
            "JUNIOR",
            "KESIEV",
            "LATEST",
            "LATTER",
            "LAUNCH",
            "LEADER",
            "LEAGUE",
            "LEAVES",
            "LEGACY",
            "LENGTH",
            "LESSON",
            "LETTER",
            "LIGHTS",
            "LINKED",
            "LIQUID",
            "LISTEN",
            "LITTLE",
            "LIVING",
            "LUCENT",
            "MAINLY",
            "MAKING",
            "MANAGE",
            "MANUAL",
            "MARGIN",
            "MARINE",
            "MARKED",
            "MARKET",
            "MASTER",
            "MATTER",
            "MEDIUM",
            "MEMBER",
            "MEMORY",
            "MERGER",
            "METHOD",
            "MIDDLE",
            "MINING",
            "MINUTE",
            "MIRROR",
            "MOBILE",
            "MODERN",
            "MODEST",
            "MODULE",
            "MOMENT",
            "MOSTLY",
            "MOTHER",
            "MOTION",
            "MOVING",
            "MUSEUM",
            "MYSELF",
            "NARROW",
            "NATION",
            "NATIVE",
            "NATURE",
            "NEARBY",
            "NEARLY",
            "NIGHTS",
            "NOBODY",
            "NORMAL",
            "NOTICE",
            "NOTION",
            "NUMBER",
            "OBJECT",
            "OBTAIN",
            "OFFICE",
            "OFFSET",
            "ONLINE",
            "OPTION",
            "ORANGE",
            "ORIGIN",
            "OUTPUT",
            "PACKED",
            "PALACE",
            "PARENT",
            "PARTLY",
            "PEOPLE",
            "PERSON",
            "PHRASE",
            "PICKED",
            "PLANET",
            "PLAYER",
            "PLEASE",
            "PLENTY",
            "POCKET",
            "PREFER",
            "PRETTY",
            "PRINCE",
            "PRISON",
            "PROFIT",
            "PROPER",
            "PROVEN",
            "PUBLIC",
            "PURSUE",
            "RAISED",
            "RANDOM",
            "RARELY",
            "RATHER",
            "RATING",
            "READER",
            "REALLY",
            "REASON",
            "RECALL",
            "RECENT",
            "RECORD",
            "REDUCE",
            "REFORM",
            "REGARD",
            "REGION",
            "RELATE",
            "RELIEF",
            "REMAIN",
            "REMOTE",
            "REMOVE",
            "REPAIR",
            "REPEAT",
            "REPLAY",
            "REPORT",
            "RESCUE",
            "RESORT",
            "RESULT",
            "RETAIL",
            "RETURN",
            "REVEAL",
            "REVIEW",
            "REWARD",
            "RIDING",
            "RISING",
            "ROBUST",
            "RULING",
            "SAFETY",
            "SALARY",
            "SAMPLE",
            "SAVING",
            "SAYING",
            "SCHEME",
            "SCHOOL",
            "SCREEN",
            "SEARCH",
            "SEASON",
            "SECOND",
            "SECRET",
            "SECTOR",
            "SECURE",
            "SEEING",
            "SELECT",
            "SERIES",
            "SERVER",
            "SETTLE",
            "SEVERE",
            "SHOULD",
            "SIGNAL",
            "SIGNED",
            "SILENT",
            "SILVER",
            "SIMPLE",
            "SIMPLY",
            "SINGLE",
            "SISTER",
            "SLIGHT",
            "SMOOTH",
            "SOCIAL",
            "SOURCE",
            "SPEECH",
            "SPIRIT",
            "SPOKEN",
            "SPREAD",
            "SPRING",
            "SQUARE",
            "STABLE",
            "STATUS",
            "STEADY",
            "STOLEN",
            "STRAIN",
            "STREAM",
            "STREET",
            "STRESS",
            "STRICT",
            "STRIKE",
            "STRING",
            "STRONG",
            "STRUCK",
            "STUDIO",
            "SUBMIT",
            "SUDDEN",
            "SUFFER",
            "SUMMER",
            "SUMMIT",
            "SUPPLY",
            "SURELY",
            "SURVEY",
            "SWITCH",
            "SYMBOL",
            "SYSTEM",
            "TAKING",
            "TALENT",
            "TARGET",
            "TAUGHT",
            "TENANT",
            "TENDER",
            "TENNIS",
            "THANKS",
            "THEORY",
            "THREAT",
            "THROWN",
            "TICKET",
            "TIMELY",
            "TIMING",
            "TISSUE",
            "TOWARD",
            "TRAVEL",
            "TREATY",
            "TRYING",
            "UNABLE",
            "UNIQUE",
            "UNITED",
            "UNLESS",
            "UNLIKE",
            "UPDATE",
            "USEFUL",
            "VALLEY",
            "VARIED",
            "VENDOR",
            "VERSUS",
            "VISION",
            "VISUAL",
            "VOLUME",
            "WALKER",
            "WEALTH",
            "WEEKLY",
            "WEIGHT",
            "WINDOW",
            "WINNER",
            "WINTER",
            "WONDER",
            "WORKER",
            "WRIGHT",
            "WRITER",
            "YELLOW"
        ],
        letters4:[
            "ABLE",
            "AGED",
            "AREA",
            "ARMY",
            "AWAY",
            "BABY",
            "BACK",
            "BALL",
            "BAND",
            "BANK",
            "BASE",
            "BATH",
            "BEAR",
            "BEAT",
            "BEEN",
            "BEER",
            "BELL",
            "BELT",
            "BEST",
            "BILL",
            "BIRD",
            "BLUE",
            "BOAT",
            "BODY",
            "BOND",
            "BOOK",
            "BORN",
            "BOSS",
            "BOTH",
            "BOWL",
            "BULK",
            "BURN",
            "BUSH",
            "BUSY",
            "CALL",
            "CALM",
            "CAMP",
            "CARD",
            "CARE",
            "CASE",
            "CASH",
            "CAST",
            "CELL",
            "CHAT",
            "CHIP",
            "CITY",
            "CLUB",
            "COAL",
            "COAT",
            "CODE",
            "COLD",
            "COME",
            "COOK",
            "COOL",
            "COPE",
            "COPY",
            "CORE",
            "COST",
            "CREW",
            "CROP",
            "DARK",
            "DATA",
            "DATE",
            "DAWN",
            "DAYS",
            "DEAL",
            "DEAR",
            "DEEP",
            "DESK",
            "DIAL",
            "DISC",
            "DISK",
            "DOES",
            "DONE",
            "DOOR",
            "DOWN",
            "DRAW",
            "DROP",
            "DUAL",
            "DUST",
            "EACH",
            "EARN",
            "EASE",
            "EAST",
            "EASY",
            "EDGE",
            "ELSE",
            "EVEN",
            "EVER",
            "EXIT",
            "FACE",
            "FACT",
            "FAIL",
            "FAIR",
            "FALL",
            "FARM",
            "FAST",
            "FATE",
            "FEAR",
            "FEED",
            "FEEL",
            "FEET",
            "FILE",
            "FILL",
            "FILM",
            "FIND",
            "FINE",
            "FIRE",
            "FIRM",
            "FISH",
            "FIVE",
            "FLAT",
            "FLOW",
            "FOOD",
            "FOOT",
            "FORD",
            "FORM",
            "FORT",
            "FOUR",
            "FREE",
            "FROM",
            "FUEL",
            "FULL",
            "FUND",
            "GAIN",
            "GAME",
            "GATE",
            "GEAR",
            "GENE",
            "GIFT",
            "GIVE",
            "GLAD",
            "GOAL",
            "GOES",
            "GOLD",
            "GOLF",
            "GOOD",
            "GRAY",
            "GREW",
            "GREY",
            "GROW",
            "HAIR",
            "HALF",
            "HALL",
            "HAND",
            "HANG",
            "HARD",
            "HARM",
            "HATE",
            "HAVE",
            "HEAD",
            "HEAR",
            "HEAT",
            "HELP",
            "HERE",
            "HERO",
            "HILL",
            "HOLD",
            "HOLE",
            "HOME",
            "HOPE",
            "HOST",
            "HOUR",
            "HUGE",
            "HUNT",
            "IDEA",
            "IRON",
            "ITEM",
            "JOIN",
            "JUMP",
            "JURY",
            "JUST",
            "KEEN",
            "KEEP",
            "KEPT",
            "KICK",
            "KIND",
            "KING",
            "KNEE",
            "KNEW",
            "KNOW",
            "LAKE",
            "LAND",
            "LANE",
            "LAST",
            "LATE",
            "LEAD",
            "LEFT",
            "LESS",
            "LIFE",
            "LIFT",
            "LIKE",
            "LINE",
            "LINK",
            "LIST",
            "LIVE",
            "LOAD",
            "LOCK",
            "LOGO",
            "LONG",
            "LOOK",
            "LOVE",
            "LUCK",
            "MAIL",
            "MAIN",
            "MAKE",
            "MANY",
            "MASS",
            "MEAL",
            "MEAN",
            "MEET",
            "MENU",
            "MILE",
            "MILK",
            "MILL",
            "MIND",
            "MINE",
            "MISS",
            "MODE",
            "MOOD",
            "MOON",
            "MORE",
            "MOST",
            "MOVE",
            "MUCH",
            "MUST",
            "NAME",
            "NAVY",
            "NEAR",
            "NECK",
            "NEED",
            "NEWS",
            "NEXT",
            "NICE",
            "NINE",
            "NONE",
            "NOSE",
            "NOTE",
            "OKAY",
            "ONCE",
            "ONLY",
            "OPEN",
            "OVER",
            "PACE",
            "PACK",
            "PAGE",
            "PAID",
            "PAIR",
            "PALM",
            "PARK",
            "PART",
            "PASS",
            "PAST",
            "PATH",
            "PEAK",
            "PICK",
            "PINK",
            "PIPE",
            "PLAN",
            "PLAY",
            "PLOT",
            "PLUG",
            "PLUS",
            "POLL",
            "POOL",
            "PORT",
            "POST",
            "PULL",
            "PURE",
            "PUSH",
            "RACE",
            "RAIL",
            "RAIN",
            "RANK",
            "RARE",
            "RATE",
            "READ",
            "REAL",
            "RELY",
            "RENT",
            "REST",
            "RICE",
            "RIDE",
            "RING",
            "RISE",
            "RISK",
            "ROAD",
            "ROCK",
            "ROLE",
            "ROLL",
            "ROOF",
            "ROOM",
            "ROOT",
            "ROSE",
            "RULE",
            "RUSH",
            "SAFE",
            "SAID",
            "SAKE",
            "SALE",
            "SALT",
            "SAME",
            "SAND",
            "SAVE",
            "SEAT",
            "SEED",
            "SEEK",
            "SEEM",
            "SEEN",
            "SELF",
            "SELL",
            "SEND",
            "SENT",
            "SHIP",
            "SHOP",
            "SHOW",
            "SHUT",
            "SICK",
            "SIDE",
            "SIGN",
            "SITE",
            "SIZE",
            "SLIP",
            "SLOW",
            "SNOW",
            "SOFT",
            "SOIL",
            "SOLD",
            "SOME",
            "SONG",
            "SOON",
            "SORT",
            "SPOT",
            "STAR",
            "STAY",
            "STEP",
            "STOP",
            "SUCH",
            "SUIT",
            "SURE",
            "TAKE",
            "TALE",
            "TALK",
            "TALL",
            "TANK",
            "TAPE",
            "TASK",
            "TEAM",
            "TECH",
            "TELL",
            "TEND",
            "TERM",
            "TEST",
            "TEXT",
            "THEY",
            "THIN",
            "THIS",
            "TILL",
            "TIME",
            "TINY",
            "TOLD",
            "TONE",
            "TOOL",
            "TOUR",
            "TOWN",
            "TREE",
            "TRIP",
            "TRUE",
            "TUNE",
            "TURN",
            "TWIN",
            "TYPE",
            "UNIT",
            "USER",
            "VARY",
            "VAST",
            "VERY",
            "VIEW",
            "WAIT",
            "WAKE",
            "WALK",
            "WALL",
            "WANT",
            "WARD",
            "WARM",
            "WASH",
            "WAVE",
            "WAYS",
            "WEAK",
            "WEAR",
            "WEEK",
            "WELL",
            "WEST",
            "WHAT",
            "WILD",
            "WILL",
            "WIND",
            "WINE",
            "WING",
            "WIRE",
            "WISE",
            "WISH",
            "WOOD",
            "WORD",
            "WORE",
            "WORK",
            "YARD",
            "YEAH",
            "YEAR",
            "YOUR",
            "ZERO",
            "ZONE"
        ]
    };

    C.COMBINATIONSETS=[
        [ 0 ],
        [       1 ],
        [ 0, 0, 1, 1,    3 ],
        [ 0,          2 ],
        [       1,    2 ],
        [ 0,    1,       3 ],
        [ 0,    1,    2 ],
        [             2 ],
        [       1, 1,    3 ],
        [ 0,    1 ]
    ];

    C.COMBINATIONS=[
        [
            // Basic patterns
            [
                [
                    {x:2,y:1, pattern:1 },
                    {x:16,y:1,pattern:1, flipX:true },
                    {x:2,y:13,pattern:2 },
                    {x:16,y:13,pattern:2, flipX:true }
                ],[
                    {x:2,y:1, pattern:1, flipX:true },
                    {x:16,y:1,pattern:1 },
                    {x:2,y:13,pattern:2, flipX:true },
                    {x:16,y:13,pattern:2 }
                ]
            ]
        ],[
            // More complex basic patterns
            [
                // A.1.3 A.1.4 
                // B_2_3 B.2_4
                [
                    {x:2,y:1, patternId:[1,[1,2]], flipXId:1, flipYId:3 },
                    {x:16,y:1,patternId:[1,[1,2]], flipXId:1, flipXNot:true, flipYId:4 },
                    {x:2,y:13,patternId:[2,[1,2]], flipXId:2, flipYId:3, flipYNot:true },
                    {x:16,y:13,patternId:[2,[1,2]], flipXId:2, flipXNot:true, flipYId:4, flipYNot:true }
                ],
                // A.1.3 A_1.4
                // B.2_3 B_2_4
                [
                    {x:2,y:1, patternId:[1,[1,2]], flipXId:1, flipYId:3 },
                    {x:16,y:1,patternId:[1,[1,2]], flipXId:1, flipXNot:true, flipYId:4 },
                    {x:2,y:13,patternId:[2,[1,2]], flipXId:2, flipYId:3, flipYNot:true },
                    {x:16,y:13,patternId:[2,[1,2]], flipXId:2, flipXNot:true, flipYId:4, flipYNot:true }
                ],
                // A.1.3 A.2.3
                // B_1_4 B_2_4
                [
                    {x:2,y:1, patternId:[1,[1,2]], flipXId:1, flipYId:3 },
                    {x:16,y:1,patternId:[1,[1,2]], flipXId:2, flipYId:3 },
                    {x:2,y:13,patternId:[2,[1,2]], flipXId:1, flipXNot:true, flipYId:4, flipYNot:true },
                    {x:16,y:13,patternId:[2,[1,2]], flipXId:2, flipXNot:true, flipYId:4, flipYNot:true }
                ],
                // A.1.3 B.2.4
                // A_1_3 B_2_4
                [
                    {x:2,y:1, patternId:[1,[1,2]], flipXId:1, flipYId:3 },
                    {x:16,y:1, patternId:[2,[1,2]], flipXId:2, flipYId:4 },
                    {x:2,y:13, patternId:[1,[1,2]], flipXId:1, flipXNot:true, flipYId:3, flipYNot:true },
                    {x:16,y:13, patternId:[2,[1,2]], flipXId:2, flipXNot:true, flipYId:4, flipYNot:true }
                ]
            ]  
        ],[
            // Chalice-like
            [
                // Chalice style
                [
                    {x:2,y:1, cropX:7, cropWidth:7, patternId:[1,[1,2]], flipYId:1 },
                    {x:9,y:1, cropWidth:7, patternId:[2,[1,2]], flipYId:2 },
                    {x:16,y:1, flipX:true, cropX:7, cropWidth:7, patternId:[2,[1,2]], flipYId:2 },
                    {x:23,y:1, flipX:true, cropWidth:7, patternId:[1,[1,2]], flipYId:1 },
                    {x:2,y:13,patternId:[3,[1,2,3]], flipYId:3 },
                    {x:16,y:13,patternId:[3,[1,2,3]], flipX:true, flipYId:3 }
                ],
                // Chalice style (uside down)
                [
                    {x:2,y:1, patternId:[3,[1,2,3]], flipYId:3 },
                    {x:16,y:1, patternId:[3,[1,2,3]], flipX:true, flipYId:3 },
                    {x:2,y:13, cropX:7, cropWidth:7, patternId:[1,[1,2]], flipYId:1 },
                    {x:9,y:13, cropWidth:7, patternId:[2,[1,2]], flipYId:2 },
                    {x:16,y:13, flipX:true, cropX:7, cropWidth:7, patternId:[2,[1,2]], flipYId:2 },
                    {x:23,y:13, flipX:true, cropWidth:7, patternId:[1,[1,2]], flipYId:1 },
                ],
                // Chalice with empty top
                [
                    {x:2,y:1, cropX:7, cropWidth:7, patternId:[1,[1,2]] },
                    {x:23,y:1, flipX:true, cropWidth:7, patternId:[1,[1,2]] },
                    {x:2,y:13, patternId:[2,[1,2]] },
                    {x:16,y:13,patternId:[2,[1,2]], flipX:true }
                ],
                // Chalice with bottom
                [
                    {x:2,y:1, patternId:[1,[1,2]] },
                    {x:16,y:1,patternId:[1,[1,2]], flipX:true },
                    {x:2,y:13, cropX:7, cropWidth:7, patternId:[2,[1,2]] },
                    {x:23,y:13, flipX:true, cropWidth:7, patternId:[2,[1,2]] },
                ]
            ]
        ],[
            // Game sprites
            [
                [
                    {x:2,y:3,width:28,height:20,spritePattern:true},
                ],[
                    {x:2,y:3,width:28,height:20,spritePattern:true},
                    {x:2,y:20,fillRect:"#",width:3,height:1},
                    {x:2,y:15,fillRect:"#",width:3,height:1},
                    {x:2,y:10,fillRect:"#",width:3,height:1},
                    {x:2,y:5,fillRect:"#",width:3,height:1},
                    {x:27,y:20,fillRect:"#",width:3,height:1},
                    {x:27,y:15,fillRect:"#",width:3,height:1},
                    {x:27,y:10,fillRect:"#",width:3,height:1},
                    {x:27,y:5,fillRect:"#",width:3,height:1},
                ],[
                    {x:2,y:3,width:28,height:20,spritePattern:true},
                    {x:3,y:20,fillRect:"#",width:2,height:1},
                    {x:3,y:15,fillRect:"#",width:2,height:1},
                    {x:3,y:10,fillRect:"#",width:2,height:1},
                    {x:3,y:5,fillRect:"#",width:2,height:1},
                    {x:27,y:20,fillRect:"#",width:2,height:1},
                    {x:27,y:15,fillRect:"#",width:2,height:1},
                    {x:27,y:10,fillRect:"#",width:2,height:1},
                    {x:27,y:5,fillRect:"#",width:2,height:1},
                ],[
                    {x:2,y:3,width:28,height:20,spritePattern:true},
                    {x:4,y:20,fillRect:"#",width:1,height:1},
                    {x:4,y:15,fillRect:"#",width:1,height:1},
                    {x:4,y:10,fillRect:"#",width:1,height:1},
                    {x:4,y:5,fillRect:"#",width:1,height:1},
                    {x:27,y:20,fillRect:"#",width:1,height:1},
                    {x:27,y:15,fillRect:"#",width:1,height:1},
                    {x:27,y:10,fillRect:"#",width:1,height:1},
                    {x:27,y:5,fillRect:"#",width:1,height:1},
                ]
            ],
            // Text
            [
                [
                    {x:2,y:1,fillRect:"#",width:28,height:8},
                    {x:2,y:2,print:"letters4",font:"small",letterSpacing:1,centerX:30,invert:true,bold:true},
                    {x:2,y:13, pattern:1 },
                    {x:16,y:13, pattern:1, flipX:true },
                ],[
                    {x:2,y:1,fillRect:"#",width:28,height:9},
                    {x:2,y:2,print:"letters4",font:"small",letterSpacing:1,centerX:30,invert:true,bold:true,jumpy:true},
                    {x:2,y:13, pattern:1 },
                    {x:16,y:13, pattern:1, flipX:true },
                ],[
                    {x:2,y:4,print:"letters4",font:"small",letterSpacing:1,centerX:30,bold:true},
                    {x:2,y:13, pattern:1 },
                    {x:16,y:13, pattern:1, flipX:true },
                ],[
                    {x:2,y:4,print:"letters4",font:"small",letterSpacing:1,centerX:30,bold:true,jumpy:true},
                    {x:2,y:13, pattern:1 },
                    {x:16,y:13, pattern:1, flipX:true },
                ],[
                    {x:2,y:1,fillRect:"#",width:28,height:8},
                    {x:2,y:2,print:"letters5",font:"small",letterSpacing:1,centerX:30,invert:true},
                    {x:2,y:13, pattern:1 },
                    {x:16,y:13, pattern:1, flipX:true },
                ],[
                    {x:2,y:1,fillRect:"#",width:28,height:9},
                    {x:2,y:2,print:"letters5",font:"small",letterSpacing:1,centerX:30,invert:true,jumpy:true},
                    {x:2,y:13, pattern:1 },
                    {x:16,y:13, pattern:1, flipX:true },
                ],[
                    {x:4,y:4,fillRect:"#",width:24,height:7},
                    {x:2,y:5,print:"letters4",font:"small",letterSpacing:2,centerX:30,invert:true},
                    {x:2,y:13, pattern:1 },
                    {x:16,y:13, pattern:1, flipX:true },
                ],[
                    {x:2,y:5,print:"letters4",font:"small",letterSpacing:2,centerX:30},
                    {x:2,y:13, pattern:1 },
                    {x:16,y:13, pattern:1, flipX:true },
                ],[
                    {x:2,y:5,print:"letters4",font:"small",letterSpacing:2,centerX:30,jumpy:true},
                    {x:2,y:13, pattern:1 },
                    {x:16,y:13, pattern:1, flipX:true },
                ],[
                    {x:2,y:4,print:"letters5",font:"small",letterSpacing:1,centerX:30},
                    {x:2,y:13, pattern:1 },
                    {x:16,y:13, pattern:1, flipX:true },
                ],[
                    {x:2,y:4,print:"letters5",font:"small",letterSpacing:1,centerX:30,jumpy:true},
                    {x:2,y:13, pattern:1 },
                    {x:16,y:13, pattern:1, flipX:true },
                ]
            ]
        ]
    ];
        
    C.ENEMIES=[
        // Skeleton
        { priority:0, tag:"ground" },
        // Bat
        { priority:1, tag:"float" },
        // Yeti
        { priority:0, tag:"ground" },
        // Medusa
        { priority:1, tag:"float" },
        // Snake
        { priority:0, tag:"ground" },
        // Golem
        { priority:0, tag:"ground" },
        // Blob - Can't jump so look for a wide space
        { priority:2, tag:"wide" },
        // Goblin
        { priority:0, tag:"ground" },
    ];

    C.SPRITESTENCILS=[
        [ game.cells.poisonBubble, [ 0 ] ],
        [ game.cells.spinStar ],
        [ game.cells.spinStarBubble, [ 0 ] ],
        [ game.cells.tornadoBubble, [ 0 ] ],
        [ game.cells.bonus ],
        [ game.cells.skeletonWalking, [ 0, 3 ] ],
        [ game.cells.batFlying, [ 1 ] ],
        [ game.cells.blobWalking, [ 0, 3 ] ],
        [ game.cells.pop, [ 1 ] ],
        [ game.cells.disappear, [ 2 ] ],
        [ game.cells.yendorAmulet, [ 0 ] ],
        [ game.cells.waterBubble, [ 0 ] ],
        [ game.cells.boltBubble, [ 0 ] ],
        [ game.cells.fireBubble, [ 1 ] ],
        [ game.cells.bolt, [ 0 ] ],
        [ game.cells.letterBubbles ],
        [ game.cells.star ],
        [ game.cells.ball ],
        [ game.cells.death, [ 0 ] ],
        [ game.cells.whiteFireball, [ 0 ] ],
        [ game.cells.fireBolt, [ 0 ] ],
        [ game.cells.player1SmallBubble ],
        [ game.cells.player1LargeBubble ],
        [ game.cells.player1Front, [ 0 ] ]
    ];
        
}

function stagesGenerator(game,seed,C) {

    const
        RND=game.newSeededRandomizer(seed),
        FONTS={
            small:[
                [
                    " # ",
                    "# #",
                    "###",
                    "# #",
                    "# #"
                ],[
                    "## ",
                    "# #",
                    "## ",
                    "# #",
                    "## "
                ],[
                    " ##",
                    "#  ",
                    "#  ",
                    "#  ",
                    " ##"
                ],[
                    "## ",
                    "# #",
                    "# #",
                    "# #",
                    "## "
                ],[
                    "###",
                    "#  ",
                    "## ",
                    "#  ",
                    "###"
                ],[
                    "###",
                    "#  ",
                    "## ",
                    "#  ",
                    "#  "
                ],[
                    " ##",
                    "#  ",
                    "# #",
                    "# #",
                    " ##"
                ],[
                    "# #",
                    "# #",
                    "###",
                    "# #",
                    "# #"
                ],[
                    " # ",
                    " # ",
                    " # ",
                    " # ",
                    " # "
                ],[
                    "###",
                    "  #",
                    "  #",
                    "# #",
                    " # "
                ],[
                    "# #",
                    "# #",
                    "## ",
                    "# #",
                    "# #"
                ],[
                    "#  ",
                    "#  ",
                    "#  ",
                    "#  ",
                    "###"
                ],[
                    "# #",
                    "###",
                    "###",
                    "# #",
                    "# #"
                ],[
                    "# #",
                    "### ",
                    "# #",
                    "# #",
                    "# #"
                ],[
                    " # ",
                    "# #",
                    "# #",
                    "# #",
                    " # "
                ],[
                    "## ",
                    "# #",
                    "## ",
                    "#  ",
                    "#  "
                ],[
                    " # ",
                    "# #",
                    "# #",
                    "# #",
                    " ## "
                ],[
                    "## ",
                    "# #",
                    "## ",
                    "# #",
                    "# #"
                ],[
                    " ##",
                    "#  ",
                    " # ",
                    "  #",
                    "## "
                ],[
                    "###",
                    " # ",
                    " # ",
                    " # ",
                    " # "
                ],[
                    "# #",
                    "# #",
                    "# #",
                    "# #",
                    "###"
                ],[
                    "# #",
                    "# #",
                    "# #",
                    "# #",
                    " # "
                ],[
                    "# #",
                    "# #",
                    "###",
                    "###",
                    "# #"
                ],[
                    "# #",
                    "# #",
                    " # ",
                    "# #",
                    "# #"
                ],[
                    "# #",
                    "# #",
                    " # ",
                    " # ",
                    " # "
                ],[
                    "###",
                    "  #",
                    " # ",
                    "#  ",
                    "###"
                ]
            ]
        },
        TEMPLATES=Math.floor(game.images.walls.height/16),
        SPRITESPATTERNS=[],
        SPECIALSTAGES={
            "50":{
                scheduleBonus:[
                    "skinsnowman",
                    "skinjin",
                    "skinhippo",
                    "skinninja",
                    "skincleaner",
                    "skinmarine"
                ]
            },
            "73":{
                scheduleBonus:[
                    "minigamecart"
                ]
            }
        },
        EXTRABUBBLES=["spinStar","tornado"],
        SPECIALBUBBLES=[
            ["normal"],
            ["water","normal"],
            ["bolt","water","normal"],
            ["bolt","water","fire","normal","normal"],
            ["bolt","water","fire"],
            ["bolt","water","fire","normal","poison"],
            ["bolt","water","fire","normal","normal","special"],
            ["bolt","water","fire","normal","normal","special","poison"],
            ["bolt","water","fire","normal","bolt","water","fire","normal","special"],
        ],
        STAGETIMER=C.ONESEC*30,
        DEATHTIMER=C.ONESEC*10,    
        BONUSSTAGEBONUSLIMIT=60;

    // Prepare sprite stencil

    function spriteToStencil(cells,frame) {

        let
            framedata=cells.frames[frame],
            ret=[];

        for (let y=0;y<framedata.height;y++) {
            let line="";
            for (let x=0;x<framedata.width;x++) {
                let
                    px=framedata.x1+x,
                    py=framedata.y1+y,
                    pixel=game.getPixel(cells.image,px,py);

                if ((pixel[3]<30)||((pixel[0]<35)&&(pixel[1]<35)&&(pixel[2]<35)))
                    line+=" ";
                else {
                    pixel=pixel.join("-");
                    let
                        up=y>0?game.getPixel(cells.image,px,py-1).join("-"):0,
                        down=y<framedata.height-1?game.getPixel(cells.image,px,py+1).join("-"):0,
                        left=x>0?game.getPixel(cells.image,px-1,py).join("-"):0,
                        right=x<framedata.width-1?game.getPixel(cells.image,px+1,py).join("-"):0;

                    if ((pixel!=up)||(pixel!=down)||(pixel!=left)||(pixel!=right)) {
                        line+="#";
                    } else
                        line+=" ";
                }

            }
            ret.push(line);
        }

        return ret;

    }

    function indexSpriteStencil(cells,frame) {
        let
            stencil=spriteToStencil(cells,frame),
            filled=0,
            empty=0;

        for (let y=0;y<stencil.length;y++)
            for (let x=0;x<stencil[y].length;x++) {
                if (stencil[y][x]=="#")
                    filled++;
                else
                    empty++;
            }

        if ((empty>125)&&(empty<255)) {
            let signature=stencil.join("");
            if (!signatures[signature]) {
                signatures[signature]=true;
                SPRITESPATTERNS.push(stencil);
            }
        }
    }

    let signatures={};
    C.SPRITESTENCILS.forEach(cells=>{
        if (cells[1])
            cells[1].forEach(frame=>{
                indexSpriteStencil(cells[0],frame);
            });
        else
            cells[0].frames.forEach((frame,id)=>{
                indexSpriteStencil(cells[0],id);
            });
    });
    
    // Prepare bags

    let
        patternsBags=[],
        spritesPatternsBag=RND.newBag(SPRITESPATTERNS);

    // Uses just a slice of the known patterns so you get a different "style"
    // every set.

    C.STAGEPATTERNS.forEach(set=>{
        let
            subset=[],
            bag=RND.newBag(set),
            count=Math.ceil(set.length*0.7);
        for (let i=0;i<count;i++)
            subset.push(bag.pick());
        patternsBags.push(RND.newBag(subset));
    })

    function paste(map,submap,x,y,flipx,flipy,cropx,cropy,cropwidth,cropheight) {
        if (!cropx) cropx=0;
        if (!cropy) cropy=0;
        let
            height=cropheight || submap.length,
            width=cropwidth || submap[0].length;

        for (let sy=0;sy<height;sy++)
            for (let sx=0;sx<width;sx++) {
                let line=submap[flipy?submap.length-1-sy-cropy:sy+cropy];
                map[y+sy][x+sx]=line[flipx?line.length-1-sx-cropx:sx+cropx];
            }
    }

    function pasteInvert(map,submap,x,y,flipx,flipy) {
        for (let sy=0;sy<submap.length;sy++)
            for (let sx=0;sx<submap[0].length;sx++) {
                let line=submap[flipy?submap.length-1-sy:sy];
                map[y+sy][x+sx]=line[flipx?line.length-1-sx:sx]=="#"?" ":"#";
            }
    }

    function randomPattern(stage) {
        return patternsBags[RND.randomElement(C.STAGEPATTERNSETS[Math.floor(stage/C.STAGESCOUNT*C.STAGEPATTERNSETS.length)])].pick();
    }

    function randomPalette(stage) {
        return (palettesBags[RND.randomInteger(1+Math.floor(stage/C.STAGESCOUNT*palettesBags.length))]).pick();
    }

    function randomCombination(stage) {
        return RND.randomElement(RND.randomElement(C.COMBINATIONS[RND.randomElement(C.COMBINATIONSETS[Math.floor(stage/C.STAGESCOUNT*C.COMBINATIONSETS.length)])]));
    }

    function randomObjectives(stage) {
        let
            enemyStart=stage<5?0:1,
            enemyCount=C.ENEMIES.length-enemyStart,
            windowStart=enemyStart+Math.floor(stage/C.STAGESCOUNT*enemyCount),
            windowLength=enemyStart+1+Math.floor(Math.cos((stage/C.STAGESCOUNT+0.2)*25)*2),
            windowEnd=Math.max(0,windowStart-windowLength),
            windowRange=windowStart-windowEnd+1,
            enemiesAmount=(stage<C.STAGESCOUNT/3?3:4)+Math.round(Math.sin((stage/C.STAGESCOUNT+0.2)*25)*1.5),
            enemiesMap={},
            enemiesList=[],
            specialBubblesSet=SPECIALBUBBLES[Math.floor(stage/C.STAGESCOUNT*SPECIALBUBBLES.length)],
            objectives={
                specialBubbles:[],
                specialBubblesAmount:10,
                specialBubblesFrequency:Math.ceil(C.ONESEC+C.ONESEC*RND.randomFloat()),
                holeProbability:stage<(C.STAGESCOUNT/20)?1:0.6+Math.cos(stage/C.STAGESCOUNT*60)*0.4,
                holeTop:false,
                bubblesTop:false,
                holeBottom:false,
                bubblesBottom:false,
                elements:[
                    { spawnpoint:"bonus", tag:"ground", times:2, mirror:"xmirror" }
                ]
            };

        specialBubblesSet.forEach(bubble=>{
            objectives.specialBubbles.push(specialBubblesMapping[bubble])
        });

        switch (RND.randomInteger(3)) {
            case 0:{
                objectives.holeTop=true;
                objectives.bubblesTop=true;
                objectives.holeBottom=true;
                objectives.bubblesBottom=true;
                break;
            }
            case 1:{
                objectives.holeTop=true;
                objectives.holeBottom=true;
                objectives.bubblesBottom=true;
                break;
            }
            case 2:{
                objectives.holeTop=true;
                objectives.bubblesTop=true;
                objectives.holeBottom=true;
                break;
            }
            default:{
                debugger;
            }
        }

        if (C.DEBUG.enabled && C.DEBUG.specialBubbles) {
            objectives.holeProbability=0;
            objectives.specialBubbles=C.DEBUG.specialBubbles;
            objectives.specialBubblesFrequency=C.ONESEC;
            objectives.holeTop=true;
            objectives.bubblesTop=true;
            objectives.holeBottom=true;
            objectives.bubblesBottom=true;
        }

        for (let i=0;i<enemiesAmount;i++) {
            let enemy=windowEnd+RND.randomInteger(windowRange);
            enemiesMap[enemy]=(enemiesMap[enemy]||0)+2;
        }

        for (var k in enemiesMap)
            enemiesList.push({ priority:C.ENEMIES[k].priority, type:k });

        enemiesList.sort((a,b)=>{
            return a.priority > b.priority ? -1 : (a.priority < b.priority ? 1 : 0);
        });

        enemiesList.forEach(enemy=>{
            objectives.elements.push({ enemyType:enemy.type, tag:C.ENEMIES[enemy.type].tag, times:enemiesMap[enemy.type], mirror:"xmirror"});
        });
            

        return objectives;

    }

    function addSlot(x, y) {
        let id=x+","+y;
        if (!slots.all[id]) {
            slots.all[id]={tags:[],id:id,x:x,y:y};
            tagSlot(x,y,"any");
        }
    }
    
    function tagSlot(x, y, tag) {
        let id=x+","+y;
        addSlot(x,y);
        if (slots.all[id].tags.indexOf(tag)==-1) {
            slots.all[id].tags.push(tag);
            slots.all[id][tag]=true;
            if (!slots[tag]) slots[tag]=[];
            slots[tag].push(slots.all[id]);
        }
    }

    function setSlotData(x, y, key, value) {
        let id=x+","+y;
        addSlot(x,y);
        slots.all[id][key]=value;
    }

    function linkSlot(x, y, key, dx,dy) {
        let
            id=x+","+y,
            did=dx+","+dy;
        addSlot(x,y);
        addSlot(dx,dy);
        slots.all[id][key]=slots.all[did];
        slots.all[did][key]=slots.all[id];
    }

    function removeSlot(slot) {
        delete slots.all[slot.id];
        slot.tags.forEach(tag=>{
            slots[tag].splice(slots[tag].indexOf(slot),1);
        });
    }

    function cellIsEmpty(map,x,y) {
        return !map[y]||(map[y][x]==" ");
    }

    function slotIsEmpty(map,x,y) {
        return  (
                (y<15)||
                (
                    (y<21)&&(x>10)&&(x<21)
                )
            )&&(
                !map[y]||!map[y+1]||(
                (map[y][x]==" ")&&
                (map[y][x+1]==" ")&&
                (map[y+1][x]==" ")&&
                (map[y+1][x+1]==" ")
            )
        )
    }

    function checkFreeFall(map,x) {
        for (let i=1;i<25;i++)
            if (map[i][x]!==" ") return false;
        return true;
    }
    

    let
        cells=game.newImage(game.images.walls.width,16*C.STAGESCOUNT),
        specialBubblesMapping={
            normal:"normal",
            water:"water",
            bolt:"bolt",
            fire:"fire",
            poison:"poison"
        },
        templatesBag = [],
        palettesBags = [],
        stages = [],
        bonusStageSlots,
        slots,
        map,
        enemies,
        patterns,
        stageNumber,
        currentPalette,
        currentTemplate,
        spawnpoints,
        specialBubbles,
        letterBubblesList,
        letterBubblesBag,
        dy=0;

    C.STAGEPALETTES.forEach(palette=>palettesBags.push(RND.newBag(palette)));
    specialBubblesMapping.special=RND.randomElement(EXTRABUBBLES);

    letterBubblesList=[];
    for (let i=0;i<C.LETTERBUBBLESCOUNT;i++)
        letterBubblesList.push(i);
    letterBubblesBag=RND.newBag(letterBubblesList);

    for (let s=0;s<C.STAGESCOUNT;s++) {
        
        let
            objectives=randomObjectives(s),
            combination=randomCombination(s);

        bonusStageSlots=[];
        stageNumber=String(s+1);
        slots={all:{}};
        map=[];
        enemies=[];
        patterns={};
        letterBubbles=0;
        spawnpoints={
            bonus:[],
            specialBubbles:[]
        };
        specialBubbles=0;

        // Prepare the graphic theme
        if (!templatesBag.length)
            for (let i=0;i<TEMPLATES;i++)
                templatesBag.push(i*16);

        currentPalette=randomPalette(s);
        currentTemplate=templatesBag.splice(RND.randomInteger(templatesBag.length),1)[0];
        for (let x=0;x<game.images.walls.width;x++)
            for (let y=0;y<game.images.walls.height;y++) {
                let pixel=game.getPixel(game.images.walls,x,currentTemplate+y);
                if (pixel[3])
                    switch (pixel[0]) {
                        case 16:{ // Black
                            game.putPixel(cells,x,dy+y,game.palette[currentPalette[0]].rgb);
                            break;
                        }
                        case 250:{ // Yellow
                            game.putPixel(cells,x,dy+y,game.palette[currentPalette[1]].rgb);
                            break;
                        }
                        case 0:{ // Blue
                            game.putPixel(cells,x,dy+y,game.palette[currentPalette[2]].rgb);
                            break;
                        }
                        case 115:{ // Gray
                            game.putPixel(cells,x,dy+y,game.palette[currentPalette[3]].rgb);
                            break;
                        }
                        case 160:{ // Brown
                            game.putPixel(cells,x,dy+y,game.palette[currentPalette[4]].rgb);
                            break;
                        }
                        default:{
                            console.log(x,y);
                            debugger;
                        }
                    }
                else
                    game.putPixel(cells,x,dy+y,[0,0,0,0]);
            }
        
        // Creates an empty map
        for (let i=0;i<26;i++) {
            let line=[];
            if (i%2) {
                line.push("3");
                line.push("4");
            } else {
                line.push("1");
                line.push("2");
            }
            for (let j=0;j<28;j++)
                line.push(i==0?"-":i==25?"#":" ");
            if (i%2) {
                line.push("3");
                line.push("4");
            } else {
                line.push("1");
                line.push("2");
            }
            map.push(line);
        }
        
        // Apply tiles
        let flipFlags={},patternIds={};
        combination.forEach(line=>{
            if (line.fillRect) {
                for (let x=0;x<line.width;x++)
                    for (let y=0;y<line.height;y++)
                        map[line.y+y][line.x+x]=line.fillRect;
            } else if (line.print) {
                let
                    empty=line.invert?" ":"#",
                    word=RND.randomElement(C.DICTIONARIES[line.print]),
                    font=FONTS[line.font],
                    letterSpacing=font[0][0].length+(line.bold?1:0)+line.letterSpacing,
                    ox=line.x;
                if (line.centerX)
                    ox+=Math.floor((line.centerX-(word.length*letterSpacing))/2);
                for (let i=0;i<word.length;i++) {
                    let
                        dx=ox+(i*letterSpacing),
                        dy=line.y+(line.jumpy?i%2:0),
                        letter=font[word.charCodeAt(i)-65];
                    if (line.invert)
                        pasteInvert(map,letter,dx,dy);
                    else
                        paste(map,letter,dx,dy);
                    if (line.bold)
                        for(let y=0;y<letter.length;y++)
                            for(let x=0;x<letter[y].length;x++)
                                if (map[y+dy][dx+x] == empty) {
                                    map[y+dy][dx+x-1]=map[y+dy][dx+x];
                                    break;
                                }
                }
            } else if (line.spritePattern) {
                let pattern=spritesPatternsBag.pick();
                paste(map,pattern,line.x+Math.floor((line.width-pattern[0].length)/2),line.y+Math.floor((line.height-pattern.length)/2));
            } else {
                let
                    pattern=line.pattern;
                    flipX=line.flipX,
                    flipY=line.flipY;

                if (line.patternId) {
                    if (patternIds[line.patternId[0]] === undefined) patternIds[line.patternId[0]]=RND.randomElement(line.patternId[1]);
                    pattern=patternIds[line.patternId[0]];
                }

                if (!patterns[pattern]) patterns[pattern]=randomPattern(s);
                
                let patterndata=patterns[pattern];
                if (line.flipYId) {
                    if (flipFlags[line.flipYId] === undefined) flipFlags[line.flipYId]=RND.randomBool(0.5);
                    flipY=flipFlags[line.flipYId];
                }
                if (line.flipXId) {
                    if (flipFlags[line.flipXId] === undefined) flipFlags[line.flipXId]=RND.randomBool(0.5);
                    flipX=flipFlags[line.flipXId];
                }

                if (line.flipXNot)
                    flipX=!flipX;
                if (line.flipYNot)
                    flipY=!flipY;

                paste(map,patterndata,line.x,line.y, flipX, flipY, line.cropX,line.cropY,line.cropWidth,line.cropHeight);
            } 
        });

        // Open holes
        for (let i=4;i<16;i++)
            if (
                RND.randomBool(objectives.holeProbability)&&
                    !checkFreeFall(map,i)&&
                    !checkFreeFall(map,i+1)&&
                    !checkFreeFall(map,30-i)&&
                    !checkFreeFall(map,31-i)&&
                    (map[1][i]==" ")&&(map[1][31-i]==" ")&&
                    (map[24][31-i]==" ")&&(map[24][31-i]==" ")&&
                    (map[1][i+1]==" ")&&(map[1][31-i]==" ")&&
                    (map[24][30-i]==" ")&&(map[24][30-i]==" ")
            ) {
                if (objectives.holeTop) {
                    map[0][i]=" ";
                    map[0][i+1]=" ";

                    map[0][31-i]=" ";
                    map[0][30-i]=" ";
                }

                if (objectives.holeBottom) {
                    map[25][i]=" ";
                    map[25][i+1]=" ";

                    map[25][31-i]=" ";
                    map[25][30-i]=" ";
                }

                if (objectives.specialBubbles.length && (objectives.bubblesTop || objectives.bubblesBottom)) {
                    if (objectives.bubblesBottom) {
                        spawnpoints.specialBubbles.push({x:i*8,y:C.SCREENHEIGHT,side:false});
                        spawnpoints.specialBubbles.push({x:(30-i)*8,y:C.SCREENHEIGHT,side:false});
                        specialBubbles=objectives.specialBubbles;
                    }
                    if (objectives.bubblesTop) {
                        spawnpoints.specialBubbles.push({x:i*8,y:0,side:true});
                        spawnpoints.specialBubbles.push({x:(30-i)*8,y:0,side:true});
                        specialBubbles=objectives.specialBubbles;
                    }
                }

            }

        // If stage has special bubbles, add letter bubbles
        if (specialBubbles) {
            letterBubbles=[];
            letterBubbles.push(letterBubblesBag.pick());
            letterBubbles.push(letterBubblesBag.pick());
            letterBubbles.push(RND.randomElement(letterBubblesList));
        }
        

        // Prepare bonus slots
        for (let y=1;y<25;y+=2) {
            for (let x=2;x<30;x++)
                if (slotIsEmpty(map,x,y)) {
                    bonusStageSlots.push({x:x*8,y:y*8});
                    x++;
                }
            if (bonusStageSlots.length>BONUSSTAGEBONUSLIMIT) break;
        }

        // Look for enemy slots
        for (let y=1;y<25;y++)
            for (let x=2;x<30;x++)
                
                if (slotIsEmpty(map,x,y)) {

                    addSlot(x,y);
                    if (!cellIsEmpty(map,x,y+2)&&!cellIsEmpty(map,x+1,y+2)) {
                        tagSlot(x,y,"ground");
                        if (cellIsEmpty(map,x-1,y)&&cellIsEmpty(map,x-1,y+1)&&cellIsEmpty(map,x+2,y)&&cellIsEmpty(map,x+2,y+1))
                            tagSlot(x,y,"wide");
                    }
                    if (
                        (cellIsEmpty(map,x,y+2)&&cellIsEmpty(map,x+1,y+2))||
                        (cellIsEmpty(map,x,y-1)&&cellIsEmpty(map,x+1,y-1))||
                        (cellIsEmpty(map,x-1,y)&&cellIsEmpty(map,x-1,y+1))||
                        (cellIsEmpty(map,x+2,y)&&cellIsEmpty(map,x+2,y+1))
                    )
                        tagSlot(x,y,"float");
                    if (slotIsEmpty(map,30-x,y))
                        linkSlot(x,y,"xmirror",30-x,y);
                    if (slotIsEmpty(map,x,25-y))
                        linkSlot(x,y,"ymirror",x,25-y);

            }

        // Place enemies according to stage objectives
        objectives.elements.forEach(objective=>{
            for (let i=objective.times;i>0;i--) {
                let requestedTag=objective.tag;
                if (!slots[objective.tag] || !slots[requestedTag].length)
                    requestedTag="any";
                if (slots[requestedTag] && slots[requestedTag].length) {
                    let
                        side=RND.randomBool(0.5),
                        pos=RND.randomItemPosition(slots[requestedTag]),
                        slot=slots[requestedTag][pos],
                        mirrorSlot=slot[objective.mirror],
                        yside=RND.randomBool(0.5);
                    if (objective.enemyType !== undefined )
                        enemies.push({type:objective.enemyType, x:slot.x*8, y:slot.y*8, flipX:side, setSpeedX:side?-1:1, setSpeedY:yside?-1:1});
                    else if (objective.spawnpoint)
                        spawnpoints[objective.spawnpoint].push({x:slot.x*8, y:slot.y*8});
                    if (mirrorSlot && mirrorSlot[requestedTag] && (i>1)) {
                        if (objective.enemyType !== undefined)
                            enemies.push({type:objective.enemyType, x:mirrorSlot.x*8, y:mirrorSlot.y*8, flipX:!side, setSpeedX:side?1:-1, setSpeedY:yside?-1:1 });
                        else if (objective.spawnpoint)
                            spawnpoints[objective.spawnpoint].push({x:mirrorSlot.x*8, y:mirrorSlot.y*8});
                        removeSlot(mirrorSlot);
                        i--;
                    }
                    removeSlot(slot);
                } else break;
            }
        });

        // Makes room for the players
        map[23][2]=" ";
        map[23][3]=" ";
        map[24][2]=" ";
        map[24][3]=" ";
        map[23][28]=" ";
        map[23][29]=" ";
        map[24][28]=" ";
        map[24][29]=" ";

        // Add depth effect
        for (let y=25;y>0;y--)
            for (let x=2;x<30;x++)
                if (map[y][x] == " ")
                    if (map[y-1])
                        if (map[y-1][x] != " ")
                            map[y][x]="^";


        let stage={
            id:s,
            name:"STAGE "+stageNumber,
            shortName:stageNumber,
            shortNameX:7-Math.floor((stageNumber.length*(game.fonts.small.outline.letterWidth+game.fonts.small.outline.letterSpacing))/2),
            map:map,
            enemies:enemies,
            spawnpoints:spawnpoints,
            stageTimer:STAGETIMER,
            deathTimer:STAGETIMER+DEATHTIMER,
            specialBubbles:specialBubbles,
            letterBubbles:letterBubbles,
            specialBubblesFrequency:objectives.specialBubblesFrequency,
            specialBubblesAmount:objectives.specialBubblesAmount,
            bonusStageSlots:bonusStageSlots,
            cells:{
                image:cells,
                frames:[
                    {x1:0,y1:dy,width:8, height:8},
                    {x1:0,y1:dy+8,width:8, height:8},
                    {x1:8,y1:dy,width:8, height:8},
                    {x1:16,y1:dy,width:8, height:8},
                    {x1:8,y1:dy+8,width:8, height:8},
                    {x1:16,y1:dy+8,width:8, height:8}
                ]
            },
        };
        
        if (SPECIALSTAGES[s])
            for (let k in SPECIALSTAGES[s])
                stage[k]=RND.randomElement(SPECIALSTAGES[s][k]);
        
        stages.push(stage);
        dy+=16;
    }

    cells.ctx.putImageData(cells.imgdata,0,0);

    return stages;
                
}
